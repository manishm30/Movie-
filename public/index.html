<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recommended Movies</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    body {
      font-family: 'Poppins', sans-serif;
    }
    .hover-card:hover {
      transform: translateY(-5px);
      transition: all 0.3s ease;
    }
    .movie-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
      border-radius: 0.5rem;

      .profile-image {
      width: 40px;
      height: 40px;
      border-radius: 50%;
      object-fit: cover;  
    }
  </style>
</head>

    <body class="bg-gradient-to-r from-gray-900 to-indigo-600 min-h-screen text-gray-300 flex flex-col justify-between">
      <!-- Sign In and Login -->
      <!-- Sign In and Login -->
<header class="bg-gray-800 text-gray-400 p-4 mb-6">
    <div class="container mx-auto flex justify-between items-center">
      <h1 class="text-2xl font-bold text-white">Movie Recommendations</h1>
      <div class="flex items-center space-x-4">
        
        <span class="text-gray-300">Bengaluru</span>
        
        <button onclick="toggleModal('signin-modal')" class="bg-indigo-600 text-white px-4 py-2 rounded hover:bg-indigo-500">Sign In</button>
        <button onclick="toggleModal('login-modal')" class="bg-gray-700 text-white px-4 py-2 rounded hover:bg-gray-600">Login</button>
        <div class="border rounded-full p-2 flex items-center space-x-2">
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" viewBox="0 0 24 24" stroke="currentColor" fill="none" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
              <path d="M3 12h18M3 6h18M3 18h18"></path>
            </svg>
            <svg xmlns="http://www.w3.org/2000/svg" class="h-6 w-6" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor">
              <path stroke-linecap="round" stroke-linejoin="round" d="M17.982 18.725A7.488 7.488 0 0 0 12 15.75a7.488 7.488 0 0 0-5.982 2.975m11.963 0a9 9 0 1 0-11.963 0m11.963 0A8.966 8.966 0 0 1 12 21a8.966 8.966 0 0 1-5.982-2.275M15 9.75a3 3 0 1 1-6 0 3 3 0 0 1 6 0Z" />
            </svg>
          </div>
      </div>
    </div>
  </header>
  
    

    <!-- Search and Filter Section -->
    <div class="flex flex-col md:flex-row justify-between mb-8">
      <input
        type="text"
        id="search-input"
        placeholder="Search by title..."
        class="p-2 rounded bg-gray-800 text-gray-300 w-full md:w-1/3 mb-4 md:mb-0"
        oninput="applyFilters()"
      />



      <select id="genre-filter" class="p-2 rounded bg-gray-800 text-gray-300 w-full md:w-1/4 mb-4 md:mb-0" onchange="applyFilters()">
        <option value="">All Genres</option>
        <option value="Drama">Drama</option>
        <option value="Thriller">Thriller</option>
        <option value="Action">Action</option>
        <option value="Comedy">Comedy</option>
        <option value="Sci-Fi">Sci-Fi</option>
      </select>


      <select id="language-filter" class="p-2 rounded bg-gray-800 text-gray-300 w-full md:w-1/4" onchange="applyFilters()">
        <option value="">All Languages</option>
        <option value="English">English</option>
        <option value="Hindi">Hindi</option>
        <option value="Spanish">Spanish</option>
        <option value="French">French</option>
      </select>
    </div>

    <!-- Cards Section -->
    <div id="card-container" class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6"></div>
  </div>

   <!-- Sign In -->
   <div id="signin-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-gray-800 p-6 rounded-lg w-80">
      <h3 class="text-2xl text-white mb-4">Sign In</h3>
      <input type="text" placeholder="Username" class="w-full p-2 mb-4 bg-gray-700 rounded text-gray-300" />
      <input type="password" placeholder="Password" class="w-full p-2 mb-4 bg-gray-700 rounded text-gray-300" />
      <button class="w-full bg-indigo-600 py-2 rounded hover:bg-indigo-500 text-white mb-4">Sign In</button>
      <button onclick="toggleModal('signin-modal')" class="w-full bg-gray-600 py-2 rounded hover:bg-gray-500 text-white">Cancel</button>
    </div>
  </div>



  <!-- Login -->
  <div id="login-modal" class="hidden fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center">
    <div class="bg-gray-800 p-6 rounded-lg w-80">
      <h3 class="text-2xl text-white mb-4">Login</h3>
      <input type="email" placeholder="Email" class="w-full p-2 mb-4 bg-gray-700 rounded text-gray-300" />
      <input type="password" placeholder="Password" class="w-full p-2 mb-4 bg-gray-700 rounded text-gray-300" />
      <button class="w-full bg-indigo-600 py-2 rounded hover:bg-indigo-500 text-white mb-4">Login</button>
      <button onclick="toggleModal('login-modal')" class="w-full bg-gray-600 py-2 rounded hover:bg-gray-500 text-white">Cancel</button>
    </div>
  </div>



  <!-- Footer Section -->
  <footer class="bg-gray-800 text-gray-400 py-6 mt-8">
    <div class="container mx-auto px-4 flex flex-col md:flex-row justify-between items-center">
      <p class="text-center md:text-left mb-4 md:mb-0">&copy; 2024 Movie Recommendations. All rights reserved.</p>
      <div class="flex space-x-4">
        <a href="#" class="hover:text-white">Privacy Policy</a>
        <a href="#" class="hover:text-white">Terms of Service</a>
        <a href="#" class="hover:text-white">Contact Us</a>
        <a href="#" class="hover:text-white">About Us</a>
        <a href="#" class="hover:text-white">Help Center</a>
      </div>
    </div>
  </footer>


  <script>
    function toggleModal(modalId) {
      const modal = document.getElementById(modalId);
      modal.classList.toggle('hidden');
    }
  
    let allMovies = [];
    const realMovieNames = [
      'The Shawshank Redemption', 'Inception', 'The Dark Knight', 'Pulp Fiction', 
      'Forrest Gump', 'Interstellar', 'Parasite', 'The Godfather', 
      'The Matrix', 'Gladiator', 'Titanic', 'Joker', 'Avengers: Endgame', 
      'Spider-Man: No Way Home', 'Baahubali', 'RRR', 'Dangal', 'KGF Chapter 2'
    ];
  
    const genres = ['Drama', 'Thriller', 'Action', 'Comedy', 'Sci-Fi'];
    const languages = ['English', 'Hindi', 'Spanish', 'French',];
  
    async function fetchMovies() {
      const tmdbApiKey = 'd4f6b4e60ff11546e800af3bd5da782d'; 
      const tmdbBaseUrl = 'https://api.themoviedb.org/3';
  
      try {
        const response = await fetch('https://jsonplaceholder.typicode.com/posts');
        const posts = await response.json();
  
        allMovies = await Promise.all(
          posts.slice(0, realMovieNames.length).map(async (post, index) => {
            const movieTitle = realMovieNames[index];
            const movieData = await fetchMovieDataFromTMDB(movieTitle, tmdbApiKey, tmdbBaseUrl);
            // Randomize the initial likes between 0 and 1000
            const initialLikes = Math.floor(Math.random() * 1000);
            
            return {
              title: movieTitle,
              imageUrl: movieData.posterPath,
              genre: genres[Math.floor(Math.random() * genres.length)],  
              language: languages[Math.floor(Math.random() * languages.length)],  
              likes: initialLikes, 
              imdb: (8 + Math.random()).toFixed(1),
              id: post.id
            };
          })
        );
  
        renderCards(allMovies);
      } catch (error) {
        console.error("Failed to fetch movies:", error);
      }
    }
  
    async function fetchMovieDataFromTMDB(title, apiKey, baseUrl) {
      const url = `${baseUrl}/search/movie?api_key=${apiKey}&query=${encodeURIComponent(title)}`;
      try {
        const response = await fetch(url);
        const data = await response.json();
        if (data.results && data.results.length > 0) {
          const posterPath = `https://image.tmdb.org/t/p/w500${data.results[0].poster_path}`;
          return { posterPath };
        } else {
          return { posterPath: 'https://via.placeholder.com/150?text=Image+Not+Found' };
        }
      } catch (error) {
        console.error(`Failed to fetch data for ${title} from TMDB:`, error);
        return { posterPath: 'https://via.placeholder.com/150?text=Error' };
      }
    }
  
    function renderCards(movies) {
      const cardContainer = document.getElementById('card-container');
      cardContainer.innerHTML = '';
      movies.forEach((movie) => {
        const card = document.createElement('div');
        card.classList.add('bg-gray-800', 'p-6', 'rounded-lg', 'shadow-lg', 'hover-card');
        card.innerHTML = `
          <img src="${movie.imageUrl}" alt="${movie.title} Poster" class="movie-image mb-4" />
          <h3 class="text-xl font-semibold mb-2 text-white">${movie.title}</h3>
          <p class="text-gray-400">Genre: ${movie.genre}</p>
          <p class="text-gray-400">Language: ${movie.language}</p>
          <p class="text-gray-400">IMDb Rating: ${movie.imdb}</p>
          <div class="flex items-center justify-between mt-4">
            <button onclick="likeMovie(${movie.id})" class="bg-red-600 text-white py-1 px-3 rounded hover:bg-red-700">Like</button>
            <span class="text-red-400 font-bold" id="like-count-${movie.id}">${movie.likes} Likes</span>
          </div>
          <button onclick="deleteCard(${movie.id})" class="bg-gray-600 text-white py-1 px-3 rounded mt-4 hover:bg-gray-500">Delete</button>
        `;
        cardContainer.appendChild(card);
      });
    }
  
    // Like button functionality
    function likeMovie(id) {
      const movie = allMovies.find(m => m.id === id);
      if (movie) {
        movie.likes += 1; // Increment likes by 1
        document.getElementById(`like-count-${id}`).innerText = `${movie.likes} Likes`; // Update likes display
      }
    }
  
    // Delete button functionality
    function deleteCard(id) {
      allMovies = allMovies.filter(m => m.id !== id);
      applyFilters();
    }
  
    function applyFilters() {
      const searchInput = document.getElementById('search-input').value.toLowerCase();
      const genreFilter = document.getElementById('genre-filter').value;
      const languageFilter = document.getElementById('language-filter').value;
  
      const filteredMovies = allMovies.filter(movie => {
        const matchesSearch = movie.title.toLowerCase().includes(searchInput);
        const matchesGenre = genreFilter ? movie.genre === genreFilter : true;
        const matchesLanguage = languageFilter ? movie.language === languageFilter : true;
        return matchesSearch && matchesGenre && matchesLanguage;
      });
  
      renderCards(filteredMovies);
    }
  
    fetchMovies();
  </script>
  
</body>
</html>
